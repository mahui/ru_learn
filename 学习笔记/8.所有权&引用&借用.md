# 所有权 & 引用 & 借用

## 所有权转移
- 不具备 Copy trait的类型，=赋值后，旧值会被moved
- 实现了 Drop trait的类型的 Copy trait不可以使用
- 将值传递给了函数与赋值原理类似，会被moved

## 引用

使用 &变量名 创建引用。

## 借用

使用引用的行为称为借用。

## 可变变量借用

```
&mut 变量
```

不能在同一时间多次将变量作为可变变量借用。如下：
```
let mut str = String::from("test");
let str1 = &mut str
let str2 = &mut str
```
会发生*数据竞争*。数据竞争可以由一下三个行为造成：

- 两个或多个指针同时访问同一数据
- 至少有一个指针被用来写入数据
- 没有同步数据访问的机制

> 可以多个不可变引用。
>
> 不可以多个可变引用。
>
> 不可以不可变引用与可变引用同时发生。

## 垂悬引用

在具有指针的编程语言中，很容易通过释放内存时保留指向它的指针而错误的生成一个垂悬指针(dangling pointer)

当函数的返回值被定义为一个引用。而在返回一个函数内声名的变量的引用时，会发生垂悬引用。因为其变量离开函数作用域后已被丢弃，内存已被释放。


## Slice

